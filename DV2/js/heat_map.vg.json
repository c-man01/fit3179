{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
      "url": "https://raw.githubusercontent.com/c-man01/fit3179/master/DV2/data/hire-times-hourly.csv"
  },
  "title": "When Do Londoners Cycle?",
  "width": 1000,
  "height": 500,
  "mark": "rect",
  "transform": [{
    "window": [{
      "op": "sum",
      "field": "dummy",
      "as": "TotalDummy"
    }],
    "frame": [null, null]
  },
  {
    "calculate": "datum.dummy/datum.TotalDummy * 100",
    "as": "PercentOfTotal"
  }],
  "encoding": {
      "x": {
          "field": "Start Date",
          "timeUnit": "hours",
          "type": "ordinal",
          "title": "Time",
          "axis": {
              "labelAngle": 0,
              "format": "%H"
          }
      },
      "y": {
          "field": "Start Date",
          "timeUnit": "day",
          "type": "ordinal",
          "title": "Day of Week",
          "axis":{
            "format": "%a"
          }
      },
      "color": {
          "field": "PercentOfTotal",
          "aggregate": "sum",
          "type": "quantitative"
          }
      }
  }
